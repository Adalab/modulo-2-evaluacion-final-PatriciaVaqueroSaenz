"use strict";console.log(">> Ready :)");const searchButton=document.querySelector(".js-searchButton"),resultList=document.querySelector(".js-main-list"),favoriteList=document.querySelector(".main__list-favorite");let showsName,showsImage,showsImageMedium,showId,globalData,favorites=[];const defaultImage="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";function conectToApi(){const e=document.querySelector(".js-searchInput").value;fetch("//api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{globalData=e,printShows(globalData)})}function printShows(e){resultList.innerHTML="";for(let s=0;s<e.length;s++){showsName=e[s].show.name,showsImage=e[s].show.image,showId=e[s].show.id;let t="";t=void 0===favorites.find(e=>e===showId)?"":"favorite",null===showsImage?resultList.innerHTML+=`<li data-id="${showId}" class="js-list-item ${t}"><div class="js-list-div"><h2 class="js-showName">${showsName}</h2><img class= "js-image" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"/></div></li>`:(showsImageMedium=e[s].show.image.medium,resultList.innerHTML+=`<li data-id="${showId}" class="js-list-item ${t}"><div class="js-list-div"><h2 class="js-showName">${showsName}</h2><img class="js-image" src="${showsImageMedium}"/></div></li>`)}addListenerToCards()}function handleClik(){conectToApi()}searchButton.addEventListener("click",handleClik);const inputShow=document.querySelector(".js-searchInput");let filteredShows=[];function addListenerToCards(){const e=document.querySelectorAll(".js-list-item");for(const s of e)s.addEventListener("click",handleClickCard)}function handleClickCard(e){const s=e.currentTarget.dataset.id;void 0===favorites.find(e=>e===parseInt(s))?favorites.push(parseInt(s)):favorites=favorites.filter(e=>e!==parseInt(s)),printFavoriteList(e),renderFilteredShows()}function printFavoriteList(e){const s=e.currentTarget.dataset.id,t=e.srcElement.innerText,i=e.srcElement.nextSibling.currentSrc;for(const e of favorites)favoriteList.innerHTML+=`<li data-id="${s}" class="list-fav"><div><h1 class="title-fav">${t}</h1><img class="img-fav" src="${i}"/></div></li>`}function renderFilteredShows(){const e=inputShow.value.toLowerCase();for(const s of globalData)filteredShows=globalData.filter(s=>s.show.name.toLowerCase().includes(e));printShows(filteredShows)}