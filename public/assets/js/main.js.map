{"version":3,"sources":["01-search.js","02-fav.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["/* eslint-disable no-undef */\n/* eslint-disable no-console */\n/* eslint-disable no-unused-vars */\n'use strict';\n\nconsole.log('>> Ready :)');\n\nconst searchButton = document.querySelector('.js-searchButton');\nconst resultList = document.querySelector('.js-main-list');\nlet showsName;\nlet showsImage;\nlet showsImageMedium;\nlet showId;\nlet globalData;\nlet favorites = [];\nconst defaultImage = 'https://via.placeholder.com/210x295/ffffff/666666/?text=TV';\n\n\nfunction conectToApi(){\n  const inputValue = document.querySelector('.js-searchInput').value;\n\n  fetch(`http://api.tvmaze.com/search/shows?q=${inputValue}`)\n    .then((response) => response.json())\n    .then((data) => {\n      globalData = data;\n      printShows(globalData);\n    });\n\n}\n\nfunction printShows(globalData){\n\n  //LIMPIO LA LISTA CON LOS RESULTADOS DE BÚSQUEDA\n  resultList.innerHTML ='';\n\n  for (let i=0; i< globalData.length;i++){\n    //DEVUELVE EL NOMBRE DE LAS SERIES COINCIDENTES CON LO ESCRITO EN EL INPUT\n    showsName = globalData[i].show.name;\n    //DEVUELVE LA IMAGEN DE LAS SERIES COINCIDENTES CON LO ESCRITO EN EL INPUT\n    showsImage = globalData[i].show.image;\n    //DEVUELVE EL ID DE LAS SERIES COINCIDENTES CON LO ESCRITO EN EL INPUT\n    showId = globalData[i].show.id;\n\n    // Buscar si la paleta que se está pintando está en favoritos\n    const isPresent = favorites.find( favoriteId => favoriteId === showId);\n\n\n    // Si el id está en favoritos, se renderiza el li con la clase favorite\n    let classFavorite = '';\n    if( isPresent === undefined ) {\n      classFavorite = '';\n    }\n    else {\n      classFavorite = 'favorite';\n    }\n\n    //PARA EL CASO EN QUE LA SERIE NO TENGA IMAGEN\n    if (showsImage === null){\n\n      resultList.innerHTML += `<li data-id=\"${showId}\" class=\"js-list-item ${classFavorite}\"><div class=\"js-list-div\"><h2 class=\"js-showName\">${showsName}</h2><img class= \"js-image\" src=\"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\"/></div></li>`;\n\n      //PARA LAS SERIES CON IMAGEN LA AÑADE AL LI\n    }else{\n      showsImageMedium = globalData[i].show.image.medium;\n\n      resultList.innerHTML += `<li data-id=\"${showId}\" class=\"js-list-item ${classFavorite}\"><div class=\"js-list-div\"><h2 class=\"js-showName\">${showsName}</h2><img class=\"js-image\" src=\"${showsImageMedium}\"/></div></li>`;\n\n    }\n\n  }\n  addListenerToCards();\n}\n\nfunction handleClik(){\n  conectToApi();\n}\n\nsearchButton.addEventListener('click',handleClik);\n","/* eslint-disable no-console */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-undef */\n/* eslint-disable strict */\n\nconst inputShow = document.querySelector('.js-searchInput');\nlet filteredShows = [];\n\nfunction addListenerToCards(){\n  const allCards = document.querySelectorAll('.js-list-item');\n  for( const  card  of allCards ) {\n    card.addEventListener('click', handleClickCard);\n  }\n}\n\nfunction handleClickCard(event) {\n\n  //IDENTIFICAR LI PULSADA\n  const whereIAddedTheEvent = event.currentTarget;\n\n  //OBTENER ID ASOCIADO A LA SERIE CLICKADA\n  const showId = whereIAddedTheEvent.dataset.id;\n\n  // Buscar si la paleta clickada está en favoritos\n  const isPresent = favorites.find( favoriteId => favoriteId === parseInt(showId));\n\n  if( isPresent === undefined ) {\n    // El ID de la serie en la que ha hecho click no está en el array de favoritos\n    favorites.push( parseInt(showId));\n  }\n  else {\n    favorites = favorites.filter( favoriteId => favoriteId !== parseInt(showId) );\n  }\n\n  renderFilteredShows();\n}\n\nfunction renderFilteredShows() {\n\n  // Coger el valor actual\n  const searchText = inputShow.value.toLowerCase();\n\n  // Filtrar las series que inluyen el campo de búsqueda\n  for (const data of globalData){\n    filteredShows = globalData.filter((data) => data.show.name.toLowerCase().includes(searchText) );\n  }\n  // pintar series\n  printShows(filteredShows);\n\n}\n"]}